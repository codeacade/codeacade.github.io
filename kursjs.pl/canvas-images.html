<!doctype html>
<html lang="pl-PL">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kurs Javascript - Canvas grafika</title>
	<meta name="description" content="Kurs Javascript dla superbohaterów, artykuły, tutoriale, porady, zadania do wykonania" />
    <link rel="canonical" href="https://kursjs.pl/kurs/canvas/canvas-images.php" />
	<link rel="stylesheet" href="./css.css" />
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,700&display=swap&subset=latin-ext" rel="stylesheet">
	<meta name="image" content="https://kursjs.pl/kursjs.png">
<meta name="twitter:card" content="product">
<meta name="twitter:site" content="@publisher_handle">
<meta name="twitter:title" content="Kurs Javascript">
<meta name="twitter:description" content="Kurs Javascript dla superbohaterów">
<meta name="twitter:creator" content="@kartofelek007">
<meta name="twitter:image" content="https://kursjs.pl/kursjs.png">
<meta property="og:title" content="Kurs Javascript">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.kursjs.com/">
<meta property="og:image" content="https://kursjs.pl/kursjs.png">
<meta property="og:description" content="Kurs Javascript dla superbohaterów">
<meta property="og:site_name" content="Kurs Javascript">
<link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#FF6347">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <script src="/js/jquery.min.js"></script>
</head>
<body>

<div class="page-container" id="pageContainer">
	<div class="page-content-wrapper">
        <main class="page-content" id="mainContent"  data-text-for-print="Kurs Javascript dla superbohaterów">
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <div class="rekl-cnt">
                <ins
                class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-6843603045703750"
                data-ad-slot="4690777640"
                data-ad-format="auto"
                data-full-width-responsive="true"
                ></ins>
            </div>
                        <div class="page-content-text">

<style>
    .canvas-cnt {
        display: flex;
        align-items: flex-start;
    }
    canvas {
        border: 1px solid #ddd;
        max-width: 100%;
        height: auto;
        margin-bottom: 10px;
        display: block;
        background: #fff;
    }
    .btn-canvas-reload {
        margin-left: 10px;
        text-indent: -9999px;
        width: 50px;
        height: 50px;
        border:0;
        background: transparent;
        color: #888;
        position: relative;
        background: tomato;
        color: #fff;
    }
    .btn-canvas-reload::before {
        content: "\f01e";
        font-size: 20px;
        font-family: "FontAwesome";
        position: absolute;
        text-indent: 0;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
</style>

<script>
const rand = function(min, max) {
    return Math.floor(Math.random()*(max-min+1)+min);
}

const angleToRadian = function(angle) {
    return Math.PI/180 * angle;
}
</script>

<h1 class="page-title">Canvas grafika</h1>
<p>
Aby narysować obrazek na płótnie musimy wykonać 2 kroki:
</p>
<ul>
<li>Przygotować obrazek dla JavaScript. Już to poznaliśmy w <a href="../grafika/grafika-na-stronie.php">rozdziale o grafikach</a>.</li>
<li>Obrazek pod postacią zmiennej rysujemy na płótnie korzystając z metody <strong>drawImage()</strong></li>
</ul>

<p>
Podstawowy wariant użycia metody <strong>drawImage()</strong> ma postać:
</p>

<pre><code class="language-js">
ctx.drawImage(img, x, y)
</code></pre>

<table class="tab">
<tr>
    <th><strong>img</strong></th>
    <td>określa obrazek, który będziemy rysować na płótnie</td>
</tr>
<tr>
    <th><strong>x, y</strong></th>
    <td>określają położenie rysowanego obrazka na płótnie</td>
</tr>
</table>

<p>
Aby mieć pewność, że rysowany obrazek jest już w pełni załadowany skorzystamy dla niego ze zdarzenia onload.
</p>

<pre><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');

const image = new Image();
image.addEventListener('load', function(){
    ctx.drawImage(image, 0, 0, 262, 256);
});
image.src = 'grafika.jpg';
</code></pre>

<canvas width="262" height="256" id="canvasDraw1"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasDraw1');
    const ctx = canvas.getContext('2d');
    const image = new Image();
    image.addEventListener('load', function(){
        ctx.drawImage(image, 0, 0, 262, 256);
    });

    image.src = 'fantomus.jpg';
}
</script>

<p>Po wczytaniu grafiki możemy oczywiście dalej działań na naszym canvasie jak to robilismy do tej pory:</p>

<div class="kartofel-informuje">
W poniższych linstinach użyjemy funkcji, którą napisaliśmy w <a href="./canvas.php#random">poprzednim rozdziale</a>.
</div>

<pre><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');
const image = new Image();
image.addEventListener('load', function(){
    ctx.drawImage(image, 0, 0, 262, 256);

    //stawiamy losowo liczby
    for (let i=0; i&lt;100; i++) {
        const x = rand(0, canvas.width);
        const y = rand(0, canvas.height);
        const size = rand(10, 30);
        const color = `hsla(${Math.random()*360}, 80%, 60%, 0.9)`;

        ctx.fillStyle = color;
        ctx.strokeStyle = "rgba(0,0,0,0.7)"

        ctx.font = `bold ${size}px Arial, sans-serif`;
        ctx.fillText(i, x, y);
        ctx.strokeText(i, x, y)
    }
});

image.src = 'fantomus.jpg';
</code></pre>

<canvas width="262" height="256" id="canvasDraw2"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasDraw2');
    const ctx = canvas.getContext('2d');
    const image = new Image();
    image.addEventListener('load', function(){
        ctx.drawImage(image, 0, 0, 262, 256);

        //stawiamy losowo liczby
        for (let i=0; i<100; i++) {
            const x = rand(0, canvas.width);
            const y = rand(0, canvas.height);
            const size = rand(10, 30);
            const color = `hsla(${Math.random()*360}, 80%, 60%, 0.9)`;

            ctx.fillStyle = color;
            ctx.strokeStyle = "rgba(0,0,0,0.7)"

            ctx.font = `bold ${size}px Arial, sans-serif`;
            ctx.fillText(i, x, y);
            ctx.strokeText(i, x, y)
        }

    });

    image.src = 'fantomus.jpg';
}
</script>

<!-- ### -->
<h2 class="subtitle" id="skalowanie-grafiki">Skalowanie grafiki</h2>
<p>Kolejna postać drawImage to:</p>

<pre><code class="language-js">
ctx.drawImage(img, x, y, width, height);
</code></pre>

<table class="tab">
<tr>
    <th><strong>img</strong></th>
    <td>określa obrazek, który będziemy rysować na płótnie</td>
</tr>
<tr>
    <th><strong>x, y</strong></th>
    <td>określają położenie rysowanego obrazka na płótnie</td>
</tr>
<tr>
    <th><strong>width, height</strong></th>
    <td>rozmiar grafiki na canvasie</td>
</tr>
</table>

<p>
Grafika bez przekształceń:
</p>

<p>
<img src="./fantomus.jpg"  alt="Fantom" width="262" height="256" />
</p>

<pre><code class="language-js">
const canvas = document.querySelector('canvas')
const ctx = canvas.getContext('2d');
const img = new Image();

img.addEventListener('load', function() {
    ctx.drawImage(img, 0, 0, 160, 160);
    ctx.drawImage(img, 180, 20, 120, 220);
    ctx.drawImage(img, 320, 10, 100, 100);
    ctx.drawImage(img, 430, 100, 80, 80);
});

img.src = 'fantomus.jpg';
</code></pre>

<p>
Po przekształceniach i narysowaniu na płótnie:
</p>

<canvas width="550" height="250" id="canvasScale"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasScale')
    const ctx = canvas.getContext('2d');
    const img = new Image();

    img.addEventListener('load', function() {
        ctx.drawImage(img, 0, 0, 160, 160);
        ctx.drawImage(img, 180, 20, 120, 220);
        ctx.drawImage(img, 320, 10, 100, 100);
        ctx.drawImage(img, 430, 100, 80, 80);
    });

    img.src = 'fantomus.jpg';
}
</script>


<!-- ### -->
<h2 class="subtitle" id="crop">Wycinanie kawałka grafiki</h2>
<p>
Dla metody drawImage możemy też zastosować dodatkowe atrybuty określające
położenie i rozmiar wycinanego kawałka oryginalnej grafiki.
</p>

<pre><code class="language-js">
ctx.drawImage(img, cutX, cutY, cutWidth, cutHeight, x, y, width, height);
</code></pre>

<table class="tab">
    <tr>
        <th>img</th>
        <td>grafika do wyświetlenia</td>
    </tr>
    <tr>
        <th>cutX, cutY</th>
        <td>pozycja wycinanego kawałka w oryginalnej grafice</td>
    </tr>
    <tr>
        <th>cutWidth, cutHeight</th>
        <td>rozmiar wycinanego kawałka w oryginalnej grafice</td>
    </tr>
    <tr>
        <th>x, y</th>
        <td>pozycja grafiki na canvasie</td>
    </tr>
    <tr>
        <th>width, height</th>
        <td>rozmiar grafiki na canvasie</td>
    </tr>
</table>

<p>
Przykładowo mamy grafikę z kostek - każda o rozmiarze 100x100:
</p>

<img src="./canvas-cut.jpg" alt="Wycinanie grafiki dla canvas">

<p>I teraz chcielibyśmy na canvas wrzucić elementy [1,2,5,6] , [3,4,7,8], [9,10,13,14] i [11,12,15,16] ułożone poziomo obok siebie. Dodatkowo chcielibyśmy by wrzucone na canvas kawałki miały rozmiar nie 200x200 a 160x160:</p>

<pre><code class="language-js">
const canvas = document.querySelector('canvas')
const ctx = canvas.getContext('2d');
const img = new Image();

img.addEventListener('load', function() {
    //[1,2,5,6]
    ctx.drawImage(img, 0, 0, 200, 200,        0, 0, 160, 160);
    //[3,4,7,8]
    ctx.drawImage(img, 200, 0, 200, 200,      165, 0, 160, 160);
    //[9,10,13,14]
    ctx.drawImage(img, 0, 200, 200, 200,      330, 0, 160, 160);
    //[11,12,15,16]
    ctx.drawImage(img, 200, 200, 200, 200,    495, 0, 160, 160);
});
img.src = './canvas-cut.jpg';
</code></pre>

<canvas width="800" height="160" id="canvasCroop"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasCroop');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.addEventListener('load', function() {
        //[1,2,5,6]
        ctx.drawImage(img, 0, 0, 200, 200,        0, 0, 160, 160);
        //[3,4,7,8]
        ctx.drawImage(img, 200, 0, 200, 200,    165, 0, 160, 160);
        //[9,10,13,14]
        ctx.drawImage(img, 0, 200, 200, 200,    330, 0, 160, 160);
        //[11,12,15,16]
        ctx.drawImage(img, 200, 200, 200, 200,    495, 0, 160, 160);
    });
    img.src = './canvas-cut.jpg';
}
</script>


<!-- ### -->
<h2 class="subtitle" id="pattern">Pattern</h2>
<p>Podobnie jak przy tle w CSS, także dla canvas możemy użyć powtarzania tła. Służy do tego funkcja <strong>createPattern(img, powtarzanie)</strong>. Funkcja ta przyjmuje parametry:</p>

<table class="tab">
    <tr>
        <th><strong>img</strong></th>
        <td>wczytana wcześniej grafika</td>
    </tr>
    <tr>
        <th>repeat</th>
        <td>sposób powtarzania. Przyjmuje jedną z wartości: no-repeat, repeat-x, repeat-y i no-repeat</td>
    </tr>
</table>

<pre data-line="6-7"><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');

const img = new Image();
img.addEventListener("load", function() {
    const pattern = ctx.createPattern(img, "repeat");
    ctx.fillStyle = pattern;
    ctx.fillRect(40, 20, 150, 120);
    ctx.strokeRect(40, 20, 150, 120);
});
img.src = "./happy.png";
</code></pre>

<canvas width="800" height="160" id="canvasPattern1"></canvas>

<script>
{
    const canvas = document.querySelector('#canvasPattern1');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.addEventListener("load", function() {
        const pattern = ctx.createPattern(img, "repeat");
        ctx.fillStyle = pattern;
        ctx.fillRect(40, 20, 150, 120);
        ctx.strokeRect(40, 20, 150, 120);
    });
    img.src = "./happy.png";
}
</script>

<p>Zauważ, że nasz wzorek zaczyna się krzywo. Podobnie do <a href="./canvas.php#transform">transformacji</a> aby wzór
rozpoczynał się wraz z figurą, musimy posłużyć się funkcją translate:</p>

<pre data-line="7,10,11"><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');

const img = new Image();
img.addEventListener("load", function() {
    ctx.save();
    ctx.translate(40, 20)
    const pattern = ctx.createPattern(img, "repeat");
    ctx.fillStyle = pattern;
    ctx.fillRect(0, 0, 150, 120); //zmieniamy pozycję rysowanej figury na 0,0
    ctx.strokeRect(0, 0, 150, 120);
    ctx.restore();
});
img.src = "./happy.png";
</code></pre>

<canvas width="800" height="160" id="canvasPattern2"></canvas>

<script>
{
    const canvas = document.querySelector('#canvasPattern2');
    const ctx = canvas.getContext('2d');

    const img = new Image();
    img.addEventListener("load", function() {
        ctx.save();
        ctx.translate(40, 20)
        const pattern = ctx.createPattern(img, "repeat");
        ctx.fillStyle = pattern;
        ctx.fillRect(0, 0, 150, 120);
        ctx.strokeRect(0, 0, 150, 120);
        ctx.restore();
    })
    img.src = "./happy.png"
}
</script>

<p>Podobnie będzie przy pozostałych typach powtórzeń:</p>

<pre data-line="3,11,19,27"><code class="language-js">
ctx.save();
ctx.translate(40, 20)
const pattern1 = ctx.createPattern(img, "repeat");
ctx.fillStyle = pattern1;
ctx.fillRect(0, 0, 150, 120);
ctx.strokeRect(0, 0, 150, 120);
ctx.restore();

ctx.save();
ctx.translate(200, 20)
const pattern2 = ctx.createPattern(img, "repeat-x");
ctx.fillStyle = pattern2;
ctx.fillRect(0, 0, 150, 120);
ctx.strokeRect(0, 0, 150, 120);
ctx.restore();

ctx.save();
ctx.translate(360, 20)
const pattern3 = ctx.createPattern(img, "repeat-y");
ctx.fillStyle = pattern3;
ctx.fillRect(0, 0, 150, 120);
ctx.strokeRect(0, 0, 150, 120);
ctx.restore();

ctx.save();
ctx.translate(520, 20)
const pattern4 = ctx.createPattern(img, "no-repeat");
ctx.fillStyle = pattern4;
ctx.fillRect(0, 0, 150, 120);
ctx.strokeRect(0, 0, 150, 120);
ctx.restore();
</code></pre>

<canvas width="800" height="160" id="canvasPattern3"></canvas>

<script>
{
    const canvas = document.querySelector('#canvasPattern3');
    const ctx = canvas.getContext('2d');

    const img = new Image();
    img.addEventListener("load", function() {
        ctx.save();
        ctx.translate(40, 20)
        const pattern1 = ctx.createPattern(img, "repeat");
        ctx.fillStyle = pattern1;
        ctx.fillRect(0, 0, 150, 120);
        ctx.strokeRect(0, 0, 150, 120);
        ctx.restore();

        ctx.save();
        ctx.translate(200, 20)
        const pattern2 = ctx.createPattern(img, "repeat-x");
        ctx.fillStyle = pattern2;
        ctx.fillRect(0, 0, 150, 120);
        ctx.strokeRect(0, 0, 150, 120);
        ctx.restore();

        ctx.save();
        ctx.translate(360, 20)
        const pattern3 = ctx.createPattern(img, "repeat-y");
        ctx.fillStyle = pattern3;
        ctx.fillRect(0, 0, 150, 120);
        ctx.strokeRect(0, 0, 150, 120);
        ctx.restore();

        ctx.save();
        ctx.translate(520, 20)
        const pattern4 = ctx.createPattern(img, "no-repeat");
        ctx.fillStyle = pattern4;
        ctx.fillRect(0, 0, 150, 120);
        ctx.strokeRect(0, 0, 150, 120);
        ctx.restore();
    })
    img.src = "./happy.png"
}
</script>

<!-- ### -->
<h2 class="subtitle" id="pxl">Manipulacja pikselami</h2>
<p>
    Każde grafika a w tym canvas to uporządkowany zbiór pikseli.
    Lewy górny róg to początek, a dolny prawy do koniec.
</p>
<p>
    Aby manipulować poszczególnymi pikselami wykorzystamy do tego obiekt typu <strong>ImageData</strong>.
    Obiekt taki jest "zapisem grafiki" i zawiera 3 właściwości:
</p>

<table class="tab manual">
<tr>
    <th>width, height</th>
    <td>rozmiary grafiki</td>
</tr>
<tr>
    <th><strong>imageData.data</strong></th>
    <td>zwraca 1 wymiarową tablicę, której poszczególnymi wartościami są składowe RGBa pikseli czyli<br />
    <strong>imageData.data = [r,g,b,a,  r,g,b,a,  r,g,b,a, ....];</strong><br /><br>
    Zwracana tablica jest wielkości <code>szerokośćCanvas * wysokośćCanvas * 4</code> a każda jej komórka zawiera wartość z przedziału 0-255</td>
</tr>
</table>

<p>
    Element canvas udostępnia nam też metody, dzięki którym możemy obsłużyć piksele:
</p>
<table class="tab manual">
    <tr><th style="width:400px"><strong>context.createImageData(width, height)</strong></th><td>tworzy pusty obiekt typu ImageData o wymiarach podanych w parametrach. Wszystkie piksele zwróconego obiektu są przezroczyste</td></tr>
    <tr><th><strong>context.createImageData(innyImageData)</strong></th><td>zwraca obiekt typu ImageData o wymiarach takich samych jakie ma obiekt przekazany w parametrze. Tylko wymiary są kopiowane. Dane o pikselach nie są kopiowane.</td></tr>
    <tr><th><strong>context.getImageData(x, y, width, height)</strong></th><td>pobiera obiekt typu ImageData, który jest wycinkiem canvasu o wymiarach podanych w atrybutach. Jeżeli x i y nie są podane, wtedy przyjmują wartości 0</td></tr>
    <tr><th><strong>context.putImageData(ImageData, x, y)</strong></th><td>rysuje na canvasie w pozycji x,y piksele z imagedata.</td></tr>
</table>


<!-- ### -->
<h2 class="subtitle" id="przyklad1-podmiana-kolorow">Przykład1 : podmiana kolorów</h2>
<p>Mamy prostą grafikę kwiatka. Nie ma ona antyaliasingu (rozmycia pikseli) dla łatwiejszej manipulacji pikselami.</p>

<p>Naszym zadaniem jest pobrać dane tej grafiki, a następnie zamienić liście z koloru żółtego (rgb: 255,245,104) na czerwony (rgb: 255,0,0).</p>

<img src="./kwiatek.png" alt="Kwiatek" class="space">


<p>
    Jak to zrobić? Musimy narysować na płótnie naszą grafikę - to już znamy z poprzednich przykładów.<br />
    Następnie pobierzemy dane z naszego płótna do zmiennej <strong>myImgData</strong>.<br>
    Po pobraniu takich danych wystarczy zrobić po nich pętlę (iterując co 4, bo każdy piksel opisany jest 4 składowymi: red, green, blue i alpha) i w razie czego modyfikować wartości kolorów danego piksela.<br />
    Po tej operacji zapisujemy nasz zmodyfikowany obiekt myImgData na płótno.
</p>

<pre data-line="6-27"><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');
const img = new Image();

img.addEventListener('load', function() {
    //rysujemy kwiatek na płótnie
    ctx.drawImage(img, 0, 0);

    //pobieramy dane z płótna
    const myImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

    //zmieniamy kolor listków kwiatka
    for (let i=0; i&lt;myImgData.data.length; i+=4) {
        if (myImgData.data[i] === 255) {
            myImgData.data[i] = 255;
        }
        if (myImgData.data[i+1] === 245) {
            myImgData.data[i+1] = 0;
        }
        if (myImgData.data[i+2] === 104) {
            myImgData.data[i+2] = 0;
        }
        // i+3 to alpha koloru
    }

    //rysujemy na płótnie nasz zmieniony obraz
    ctx.putImageData(myImgData, 220, 0);
});

img.src = 'kwiatek.png';
</code></pre>

<canvas width="420" height="200" id="canvasFleur"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasFleur');
    const ctx = canvas.getContext('2d');
    const img = new Image();

    img.addEventListener('load', function() {
        ctx.drawImage(img, 0, 0);

        //pobieramy dane z płótna
        const myImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

        //zmieniamy kolor listków kwiatka
        for (let i=0; i < myImgData.data.length; i += 4) {
            if (myImgData.data[i] === 255) {
                myImgData.data[i] = 255;
            }
            if (myImgData.data[i+1] === 245) {
                myImgData.data[i+1] = 0;
            }
            if (myImgData.data[i+2] === 104) {
                myImgData.data[i+2] = 0;
            }
            // i+3 to alpha koloru
        }

        //rysujemy na płótnie nasz zmieniony obraz
        ctx.putImageData(myImgData, 220, 0);
    });

    img.src = 'kwiatek.png';
}
</script>


<h2 class="subtitle" id="przyklad2-odwrocenie-kolorow">Przykład2 : odwrócenie kolorów</h2>

<p>Kolejny przykład - bardzo podobny do poprzedniego polega na odwróceniu kolorów.</p>

<pre data-line="11-17"><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');
const img = new Image();

img.addEventListener('load', function() {
    ctx.drawImage(img, 0, 0);

    //pobieramy dane z płótna
    const myImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

    //odwracam kolory
    for (let i=0; i < myImgData.data.length; i += 4) {
        myImgData.data[i] =   255 - myImgData.data[i]; //czerwony
        myImgData.data[i+1] = 255 - myImgData.data[i+1]; //zielony
        myImgData.data[i+2] = 255 - myImgData.data[i+2]; //niebieski
        // i+3 to alpha koloru
    }

    //rysujemy na płótnie nasz zmieniony obraz
    ctx.putImageData(myImgData, 276, 0);
});

img.src = 'fantomus.jpg';
</code></pre>

<canvas width="538" height="256" id="canvasPxls"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasPxls');
    const ctx = canvas.getContext('2d');
    const fanthomas = new Image();

    fanthomas.addEventListener('load', function() {
        ctx.drawImage(fanthomas, 0, 0);

        //pobieramy dane z płótna
        const myImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

        //manipulujemy kolorami
        for (let i=0; i < myImgData.data.length; i += 4) {
            myImgData.data[i] =   255 - myImgData.data[i]; //czerwony
            myImgData.data[i+1] = 255 - myImgData.data[i+1]; //zielony
            myImgData.data[i+2] = 255 - myImgData.data[i+2]; //niebieski
            // i+3 to alpha koloru
        }

        //rysujemy na płótnie nasz zmieniony obraz
        ctx.putImageData(myImgData, 276, 0);
    });

    fanthomas.src = 'fantomus.jpg';
}
</script>

<h2 class="subtitle" id="przyklad1-desaturacja-kolorow">Przykład3 : desaturacja kolorów</h2>

<p>
    Kolejny przykład pokazuje jak zrównać kolory - czyli zrobić grafikę w odcieniach szarości:
</p>

<pre data-line="11-19"><code class="language-js">
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');
const fanthomas = new Image();

fanthomas.addEventListener('load', function() {
    ctx.drawImage(fanthomas, 0, 0);

    //pobieramy dane z płótna
    const myImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

    //ujednolicam kolory - wyliczając średnią
    for (let i=0; i < myImgData.data.length; i += 4) {
        const r = myImgData.data[i];
        const g = myImgData.data[i+1];
        const b = myImgData.data[i+2];
        const a = myImgData.data[i+3];
        const average = (r+g+b) / 3;
        myImgData.data[i] = myImgData.data[i+1] = myImgData.data[i+2] = average;
    }

    //rysujemy na płótnie nasz zmieniony obraz
    ctx.putImageData(myImgData, 276, 0);
});

fanthomas.src = 'fantomus.jpg';
</code></pre>

<canvas width="538" height="256" id="canvasPxl2"></canvas>
<script>
{
    const canvas = document.querySelector('#canvasPxl2');
    const ctx = canvas.getContext('2d');
    const fanthomas = new Image();

    fanthomas.addEventListener('load', function() {
        ctx.drawImage(fanthomas, 0, 0);

        //pobieramy dane z płótna
        const myImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

        //ujednolicam kolory - wyliczając średnią
        for (let i=0; i < myImgData.data.length; i += 4) {
            const r = myImgData.data[i];
            const g = myImgData.data[i+1];
            const b = myImgData.data[i+2];
            const a = myImgData.data[i+3];
            const average = (r+g+b) / 3;
            myImgData.data[i] = myImgData.data[i+1] = myImgData.data[i+2] = average;
        }

        //rysujemy na płótnie nasz zmieniony obraz
        ctx.putImageData(myImgData, 276, 0);
    });

    fanthomas.src = 'fantomus.jpg';
}
</script>

<p>
    Ciekawy tutorial o działaniu na pikselach canvasu możesz znaleźć pod adresem:
    <a href="http://net.tutsplus.com/tutorials/javascript-ajax/canvas-from-scratch-pixel-manipulation/">http://net.tutsplus.com/tutorials/javascript-ajax/canvas-from-scratch-pixel-manipulation/</a>
</p>

<p>
I tak dalej i tak dalej.
Jakiś czas temu robiłem <a href="http://domanart.pl/generator-tablic-dla-grafik/">mini eksperyment</a>, który polegał na
odczycie pikseli z wczytywanych plików. Dzięki temu mogłem te informacje później
użyć do generowania dodatkowych rzeczy - np. animacji. Użyłem tam właśnie omawianych technik.
</p>

			</div><!-- e: page-content-text -->
			<footer class="page-footer">
				<p>
				Wszelkie prawa zastrzeżone. Jeżeli chcesz używać jakiejś części tego kursu, skontaktuj się z <a href="/kurs/autor.php">autorem</a>.
				Aha - i ta strona korzysta z <a href="/kurs/polityka-prywatnosci.php">ciasteczek</a>.
				</p>
			</footer>
							<div class="rekl-cnt">
					<ins
					class="adsbygoogle" style="margin-top:40px; display:block"
					data-ad-client="ca-pub-6843603045703750"
					data-ad-slot="4690777640"
					data-ad-format="auto"
					data-full-width-responsive="true"
					></ins>
				</div>
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
</script>
					</main><!-- e: page-content -->
			</div><!-- e: page-content-wrapper -->
            <aside id="page-sidebar-cnt" class="page-sidebar-cnt">
                <div id="page-sidebar" class="page-sidebar">
                    <button aria-label="Pokaż/ukryj Menu" aria-expanded="false" aria-controls="page-sidebar" type="button" id="pageSidebarBurger" class="page-sidebar-burger">
                        <span></span>
                    </button>
            
                    <h2 class="visuallyhidden">
                        Menu
                    </h2>
            
                    <button class="sidebar-toggle-btn" title="Pokaż/schowaj menu" aria-hidden="true">
                        <strong>Pokaż/ukryj menu</strong>
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
            
                    <div class="page-sidebar-title">
                        <a href="/kurs/kontakt.html" title="Nawrzucaj autorowi" class="mail-to-author" id="mailToAuthor">Napisz do mnie</a>
                        <a href="#popupOptions" class="page-setup-link popupOpen" title="Ustawienia strony" id="showOptions">Ustawienia</a>
                        <a href="/index.html" aria-label="Strona główna" class="page-sidebar-title-link">Kurs Javascript</a>
                    </div>
            
                    <form aria-label="Wyszukiwarka" class="search-sidebar" action="/search.html" method="post">
                        <label for="search" class="search-sidebar-label">Szukaj</label>
                        <div class="search-sidebar-input-cnt">
                            <svg class="search-sidebar-input-icon" xmlns="http://www.w3.org/2000/svg" width="26" height="28" viewBox="0 0 26 28" aria-hidden="true">
                                <path d="M18 13c0-3.859-3.141-7-7-7s-7 3.141-7 7 3.141 7 7 7 7-3.141 7-7zm8 13c0 1.094-.906 2-2 2a1.96 1.96 0 0 1-1.406-.594l-5.359-5.344a10.971 10.971 0 0 1-6.234 1.937c-6.078 0-11-4.922-11-11s4.922-11 11-11 11 4.922 11 11c0 2.219-.672 4.406-1.937 6.234l5.359 5.359c.359.359.578.875.578 1.406z"></path>
                            </svg>
                            <input type="text" id="search" autocomplete="off" name="q" class="search-sidebar-input">
                        </div>
                        <button type="submit" class="search-sidebar-button">Szukaj</button>
                    </form>
            
                    <div class="page-sidebar-table-of-content">
                        <h2 class="visuallyhidden">Spis treści</h2>
                        <div class="page-sidebar-section">
                            <h3 class="page-sidebar-section-title noopen">
                                <a href="./index.html">Strona główna</a>
                            </h3>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Słowem wstępu</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="./wstep.html">Wstęp</a>
                                    </li>
                                    <li >
                                        <a href="./co-to-jest-javascript.html">Co to jest JavaScript i z czym go się je?</a>
                                    </li>
                                    <li >
                                        <a href="./wymagania.html">Wymagania</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Super podstawy</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="./debuger.html">Debuger</a>
                                    </li>
                                    <li >
                                        <a href="./pierwszy-skrypt.html">Wstawiamy skrypty na naszą stronę</a>
                                    </li>
                                    <li >
                                        <a href="./strict-mode.html">Strict mode</a>
                                    </li>
                                    <li >
                                        <a href="./typy-danych.html">Typy danych i konwersja danych</a>
                                    </li>
                                    <li >
                                        <a href="./zmienne.html">Zmienne</a>
                                    </li>
                                    <li >
                                        <a href="./operatory.html">Operatory</a>
                                    </li>
                                    <li >
                                        <a href="./math.html">Obiekt Math</a>
                                    </li>
                                    <li >
                                        <a href="./string.html">String - teksty</a>
                                    </li>
                                    <li >
                                        <a href="./instrukcje-warunkowe.html">Instrukcje warunkowe</a>
                                    </li>
                                    <li >
                                        <a href="./petle.html">Pętle</a>
                                    </li>
                                    <li >
                                        <a href="./funkcje.html">Funkcje</a>
                                    </li>
                                    <li >
                                        <a href="./funkcje-tematy-dodatkowe.html">Funkcje - tematy dodatkowe</a>
                                    </li>
                                    <li >
                                        <a href="./tablice.html">Tablice</a>
                                    </li>
                                    <li >
                                        <a href="./tablice-iteracje.html">Tablice pętle</a>
                                    </li>
                                    <li >
                                        <a href="./debugowanie.html">Debugowanie kodu</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Obiekty</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="./obiekty.html">Obiekty i this</a>
                                    </li>
                                    <li >
                                        <a href="./obiekty-jak-to-dziala.html">Jak to działa</a>
                                    </li>
                                    <li >
                                        <a href="./obiekty-konstruktor.html">Konstruktor</a>
                                    </li>
                                    <li >
                                        <a href="./obiekty-zaawansowane-this.html">Zaawansowane this</a>
                                    </li>
                                    <li >
                                        <a href="./obiekty-dziedziczenie.html">Dziedziczenie w Javascript</a>
                                    </li>
                                    <li >
                                        <a href="./obiekty-inne-sposoby-tworzenia.html">Inne sposoby tworzenia obiektów</a>
                                    </li>
                                    <li >
                                        <a href="./obiekty-instanceof-hasownproperty.html">instanceof i hasOwnProperty</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">DOM i zdarzenia</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="./dom.html">Document Object Model</a>
                                    </li>
                                    <li >
                                        <a href="./dom-wlasciwosci.html">Właściwości elementów</a>
                                    </li>
                                    <li >
                                        <a href="./dom-relacje.html">Relacje między elementami</a>
                                    </li>
                                    <li >
                                        <a href="./dom-tworzenie-i-usuwanie.html">Tworzenie i usuwanie elementów</a>
                                    </li>
                                    <li >
                                        <a href="./style.html">Style w CSS</a>
                                    </li>
                                    <li >
                                        <a href="./events.html">Zdarzenia</a>
                                    </li>
                                    <li >
                                        <a href="./events-keys.html">Zdarzenia - klawisze</a>
                                    </li>
                                    <li >
                                        <a href="./events-mouse.html">Zdarzenia - myszka</a>
                                    </li>
                                    <li >
                                        <a href="./projekt-todo.html">Projekt TODO</a>
                                    </li>
                                    <li >
                                        <a href="./slider.html">Tworzymy slider</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Prawie podstawy</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="./grafika-na-stronie.html">Grafika na stronie</a>
                                    </li>
                                    <li >
                                        <a href="./intervals.html">setTimeout i setInterval</a>
                                    </li>
                                    <li >
                                        <a href="./match-media.html">Praca z RWD</a>
                                    </li>
                                    <li >
                                        <a href="./okna-dialogowe.html">Okienka dialogowe</a>
                                    </li>
                                    <li >
                                        <a href="./okna.html">Tworzenie nowych okien</a>
                                    </li>
                                    <li >
                                        <a href="./date.html">Obiekt Date</a>
                                    </li>
                                    <li >
                                        <a href="./date-calendar.html">Tworzymy kalendarz</a>
                                    </li>
                                    <li >
                                        <a href="./cookie.html">Obiekt Cookie</a>
                                    </li>
                                    <li >
                                        <a href="./storage.html">Storage</a>
                                    </li>
                                    <li >
                                        <a href="./regular.html">Wyrażenia regularne</a>
                                    </li>
                                    <li >
                                        <a href="./formularze.html">Formularze</a>
                                    </li>
                                    <li >
                                        <a href="./formularze-walidacja.html">Formularze - walidacja</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section show has-active-element">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Ajax</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li class="active">
                                        <a href="./ajax.html">AJAX, REST, JSON</a>
                                    </li>
                                    <li >
                                        <a href="./xmlhttprequest.html">XMLHttpRequest</a>
                                    </li>
                                    <li >
                                        <a href="./fetch.html">Fetch API</a>
                                    </li>
                                    <li >
                                        <a href="./formularz-kontaktowy.html">Dynamiczny formularz kontaktowy</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Nowy Javascript</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="./ecma-script-2015.html">ES6</a>
                                    </li>
                                    <li >
                                        <a href="./webpack.html">Webpack</a>
                                    </li>
            ./
                                        <a href="./obiekty-w-es6.html">Obiekty w ES6</a>
                                    </li>
                                    <li >
                                        <a href="./funkcja-strzalkowa.html">Funkcja strzałkowa</a>
                                    </li>
                                    <li >
                                        <a href="./spread-rest.html">Spread i rest</a>
                                    </li>
                                    <li >
                                        <a href="./template-strings.html">Template strings</a>
                                    </li>
                                    <li >
                                        <a href="./destructuring.html">Dekompozycja</a>
                                    </li>
                                    <li >
                                        <a href="./class.html">Klasy w ES6</a>
                                    </li>
                                    <li >
                                        <a href="./promises.html">Promises</a>
                                    </li>
                                    <li >
                                        <a href="./async-await.html">Async/Await</a>
                                    </li>
                                    <li >
                                        <a href="./symbole.html">Symbole</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">jQuery</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="/kurs/jquery/jquery.html">jQuery</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/jquery/animacje-w-jquery.html">Animacje w jQuery</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/jquery/jquery-ajax.html">Ajax w jQuery</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/jquery/tabs.html">Taby w jQuery</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/jquery/plugin.html">Karuzela w jQuery</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Canvas</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="/kurs/canvas/canvas.html">Canvas</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/canvas/canvas-images.html">Grafika w canvas</a>
                                    </li>
                                    <li >
                                    <a href="/kurs/canvas/canvas-paint.html">Praktycznie : Paint w canvas</a>
                                    </li>
            
                                    <li >
                                        <a href="/kurs/canvas/canvas-animacja.html">Animacja w canvas</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Gry</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="/kurs/gry/hangman/hangman.html">Szubienica</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/gry/memory/memory.html">Memory</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
            
                                    <div class="page-sidebar-section ">
                            <h3 class="page-sidebar-section-title">
                                <a href="#">Inne</a>
                            </h3>
                            <div class="page-sidebar-list-cnt">
                                <ul class="page-sidebar-list">
                                    <li >
                                        <a href="/kurs/dodatkowe-materialy.html">Dodatkowe materiały</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/faq.html">FAQ</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/polityka-prywatnosci.html">Polityka prywatności</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/autor.html">O autorze</a>
                                    </li>
                                    <li >
                                        <a href="/kurs/kontakt.html">Kontakt</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="page-sidebar-section">
                            <a class="special-link" href="/kurs/autor.html#donate">Wesprzyj kurs</a>
                        </div>
                    </div>
                </div>
            </aside></div><!-- e: page-container -->

<div class="popup" id="popupOptions">
	<div class="popup-inside">
        <div class="popup-container-cnt">
            <div class="popup-container">
                <button class="popup-close">Zamknij</button>

                <h2 class="popup-title">
                    Opcje
                </h2>

                <div class="popup-content">
                    <form class="form-options">
                        <div class="form-option">
                            <div class="form-row">
                                <div class="form-col">
                                    <label for="optionsThemeSelect">Wybierz skórkę dla listingów</label>
                                    <select id="optionsThemeSelect"></select>
                                </div>
                            </div>
                            <div class="form-row">
                                <pre><code class="language-js">
                                //tak będzie wyglądał kod

                                function test() {
                                    for (let i=0; i&lt;10; i++) {
                                        console.log("Tekst numer ", 1);
                                    }
                                }

                                test();
                                </code></pre>
                            </div>
                            <div class="form-row" id="themeLightModeRow">
                                <div class="form-col">
                                    <label for="themeLightMode">
                                        Tryb dzienny / nocny
                                    </label>

                                    <div class="light-mode-el">
                                        <input type="checkbox" id="themeLightMode">
                                        <span class="light-mode"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
	</div>
</div>
<script async defer src="https://www.googletagmanager.com/gtag/js?id=UA-38558970-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-38558970-5');
</script>

	<script src="/js/ads.js"></script>
	<script src="/js/script.min.js?v=0.13" defer></script>
</body>
</html>